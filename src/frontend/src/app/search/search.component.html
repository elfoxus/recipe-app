<div class="title">
  <a translate="header.nav.recipes"></a>
</div>

<form [formGroup]="form" (ngSubmit)="submit()">

  <div hlmAccordion>
        <div hlmAccordionItem>
            <button hlmAccordionTrigger class="accordin-text">
                <span translate="filter.title-tags"></span>
                <hlm-icon hlmAccIcon />
            </button>
            <div class="accordin-input-container">
              <brn-accordion-content hlm class="accordin-text-inside">
                <span translate="filter.tags"></span>
                <div formArrayName="tags" class="tags">
                  @for (t of tagsFormArray.controls; track t; let i = $index) {
                    <span class="tag">
                      <hlm-checkbox [formControlName]="i"/>
                      {{tags[i].name}}
                    </span>
                  }
                </div>
                <div class="flex justify-end accordin-text-inside">
                  <button hlmBtn variant='ghost' type="submit" [disabled]="form.invalid" >
                    <hlm-icon size="sm" class="mr-2 rotate-45" name="lucidePlus" strokeWidth="3"/>
                    <span translate="filter.btnDeleteFilters" class="btn-filter"></span>
                  </button>
                </div>
            </brn-accordion-content>
        </div>
      </div>

      <div hlmAccordionItem>
          <button hlmAccordionTrigger class="accordin-text">
              <span translate="filter.title-dishes"></span>
              <hlm-icon hlmAccIcon />
          </button>
          <div class="accordin-input-container">
            <brn-accordion-content hlm class="accordin-text-inside">
                <span translate="filter.dishes"></span>
                <div formArrayName="dishes" class="dishes">
                  @for (d of dishesFormArray.controls; track d; let i = $index) {
                    <span class="dish">
                      <hlm-checkbox [formControlName]="i"/>
                      {{dishes[i].name}}
                    </span>
                  }
                </div>
                <div class="flex justify-end">
                  <button hlmBtn variant='ghost' type="submit" [disabled]="form.invalid" >
                    <hlm-icon size="sm" class="mr-2 rotate-45" name="lucidePlus" strokeWidth="3"/>
                    <span translate="filter.btnDeleteFilters" class="btn-filter"></span>
                  </button>
                </div>
            </brn-accordion-content>
          </div>
      </div>

      <div hlmAccordionItem>
          <button hlmAccordionTrigger class="accordin-text">
              <span translate="filter.title-diets"></span>
              <hlm-icon hlmAccIcon />
          </button>
          <div class="accordin-input-container">
            <brn-accordion-content hlm class="accordin-text-inside">
                <span translate="filter.diets"></span>
                <div formArrayName="diets" class="diets">
                    @for (c of dietsFormArray.controls; track c; let i = $index) {
                      <span class="diet">
                        <hlm-checkbox [formControlName]="i"/>
                        {{diets[i].name}}
                      </span>
                    }
                </div>
                <div class="flex justify-end">
                  <button hlmBtn variant='ghost' type="submit" [disabled]="form.invalid">
                    <hlm-icon size="sm" class="mr-2 rotate-45" name="lucidePlus" strokeWidth="3"/>
                    <span translate="filter.btnDeleteFilters" class="btn-filter"></span>
                  </button>
                </div>
            </brn-accordion-content>
          </div>
      </div>

              <div class="py-1 flex justify-center accordin-text-inside">
                <button hlmBtn variant='ghost' type="submit" [disabled]="form.invalid">
                  <hlm-icon size="sm" class="mr-2" name="lucideSearch" strokeWidth="3"/>
                  <span translate="filter.btnFilter" class="btn-filter"></span>
                </button>
              </div>
          </div>
      `,
</form>

<div class="card-list-container">
  <div class="card-list">
      @if (recipes$ | async; as recipes) {
          @for (recipe of recipes; track recipe.id) {
            <app-recipe-card-item [recipe]="recipe" [routerLink]="'/recipe/' + recipe.id"></app-recipe-card-item>
          }
      }
  </div>
</div>
